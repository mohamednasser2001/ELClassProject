@model Models.Course
@{
    Layout = "_StudentLayout";
}

<div class="content-wrapper" style="padding: 20px;">
    <div class="header-section mb-4">
        <h2 style="font-weight: bold; color: #333;">@Model.TitleAr</h2>
        <p style="color: #666;">قائمة المحاضرات والمحتوى التعليمي</p>
    </div>

    <div class="lectures-container">
        @if (Model.Lessons != null && Model.Lessons.Any())
        {
            int count = 1;
            foreach (var Lessons in Model.Lessons)
            {
                <div class="lecture-item">
                    <div class="lecture-header" onclick="toggleLecture(this)">
                        <div class="lecture-title">
                            <span class="lecture-number">@count</span>
                            <h3>المحاضرة @count: @Lessons.Title</h3>
                        </div>
                        <i class="fas fa-chevron-down arrow-icon"></i>
                    </div>

                    <div class="lecture-content">
                        <div class="content-links">
                            @if (!string.IsNullOrEmpty(Lessons.DriveLink))
                            {
                                <a href="@Lessons.DriveLink" target="_blank" class="content-link video">
                                    <i class="fas fa-video"></i> مشاهدة المحاضرة
                                </a>
                            }
                            @if (!string.IsNullOrEmpty(Lessons.LecturePdfUrl))
                            {
                                <a href="@Lessons.LecturePdfUrl" target="_blank" class="content-link pdf">
                                    <i class="fas fa-file-pdf"></i> تحميل الـ PDF
                                </a>
                            }
                            @if (!string.IsNullOrEmpty(Lessons.AssignmentPdfUrl))
                            {
                                <a href="@Lessons.AssignmentPdfUrl" target="_blank" class="content-link assignment">
                                    <i class="fas fa-tasks"></i> حل الواجب (Assignment)
                                </a>
                            }
                        </div>
                    </div>
                </div>
                count++;
            }
        }
        else
        {
            <p class="text-muted">لا يوجد محاضرات مضافة لهذا الكورس بعد.</p>
        }
    </div>
</div>

<script>
    function toggleLecture(header) {
        // بنجيب لعنصر الأب اللي هو lecture-item
        const item = header.closest('.lecture-item');

        // بنشيل الـ active من أي محاضرة تانية مفتوحة (اختياري لو عايز واحدة بس تفتح)
        document.querySelectorAll('.lecture-item').forEach(el => {
            if (el !== item) el.classList.remove('active');
        });

        // بنعكس حالة المحاضرة اللي دوسنا عليها
        item.classList.toggle('active');
    }
</script>