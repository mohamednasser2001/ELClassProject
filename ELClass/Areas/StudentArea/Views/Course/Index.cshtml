@using Models.ViewModels
@model IEnumerable<StudentCoursesVM>

@{
    ViewData["Title"] = "All Courses";
}

<div class="ac-wrap">

    <div class="ac-head">
        <div class="ac-title">
            <i class="fa-solid fa-book-open"></i>
            <span>All courses</span>
        </div>

        <div class="ac-search">
            <i class="fa-solid fa-magnifying-glass"></i>
            <input id="acSearch" type="text" placeholder="Search courses..." autocomplete="off" />
        </div>
    </div>

    @if (Model != null && Model.Any())
    {
        <div class="ac-grid" id="acGrid">
            @foreach (var c in Model)
            {
                var title = !string.IsNullOrWhiteSpace(c.CourseTitleEn) ? c.CourseTitleEn : c.CourseTitleAr;
                if (string.IsNullOrWhiteSpace(title)) { title = "Course"; }

                <article class="ac-card" data-title="@title.ToLower()">
                    <div class="ac-card-top">
                        <div class="ac-icon">
                            <i class="fa-solid fa-layer-group"></i>
                        </div>

                        <div class="ac-info">
                            <div class="ac-name" title="@title">@title</div>
                            <div class="ac-sub">Open course content & sections</div>
                        </div>
                    </div>

                    <div class="ac-actions">
                        <a class="ac-btn"
                           asp-area="StudentArea"
                           asp-controller="Course"
                           asp-action="Details"
                           asp-route-id="@c.CourseId">
                            View details <i class="fa-solid fa-arrow-right"></i>
                        </a>
                    </div>
                </article>
            }
        </div>
    }
    else
    {
        <div class="ac-empty">
            <i class="fa-regular fa-circle-xmark"></i>
            <div>
                <div class="ac-empty-title">No courses yet</div>
                <div class="ac-empty-sub">When you enroll in a course, it will appear here.</div>
            </div>
        </div>
    }

</div>

@section Scripts {
    <script>
        // فلترة بسيطة بالـ JS (اختياري)
        (function () {
            const input = document.getElementById('acSearch');
            const grid = document.getElementById('acGrid');
            if (!input || !grid) return;

            input.addEventListener('input', function () {
                const q = (input.value || '').trim().toLowerCase();
                const cards = grid.querySelectorAll('.ac-card');
                cards.forEach(c => {
                    const t = (c.getAttribute('data-title') || '');
                    c.style.display = (t.includes(q)) ? '' : 'none';
                });
            });
        })();
    </script>
}

