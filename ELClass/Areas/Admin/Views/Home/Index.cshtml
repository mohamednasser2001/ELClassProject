@{
    var currentLang = System.Threading.Thread.CurrentThread.CurrentCulture.Name.StartsWith("ar") ? "ar" : "en";
    var isAr = currentLang == "ar";
    var direction = isAr ? "rtl" : "ltr";
    ViewData["Title"] = isAr ? "لوحة التحكم" : "Admin Dashboard";
}

<div class="container-fluid" style="direction: @direction; text-align: @(isAr ? "right" : "left");">
    <div class="row mb-4">
        <div class="col-12">
            <div class="card custom-card" style="border-top: 4px solid var(--color-primary); background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-bg-white) 100%);">
                <div class="card-body py-4">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h3 class="mb-2" style="color: var(--color-primary);">
                                <i class="ti ti-dashboard me-2"></i>
                                @(isAr ? "مرحباً بك في لوحة تحكم ELClass" : "Welcome to ELClass Admin Dashboard")
                            </h3>
                            <p class="mb-0 text-muted">
                                @(isAr ? "قم بإدارة منصتك التعليمية بكل سهولة. تتبع تقدم الطلاب، نظم الدروس، وادعم مجتمعك التعليمي." : "Manage your educational platform with ease. Track student progress, organize lessons, and support your teaching community.")
                            </p>
                        </div>
                        <div class="col-md-4 text-end d-none d-md-block">
                            <i class="ti ti-book" style="font-size: 80px; opacity: 0.15; color: var(--color-primary);"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card custom-card overflow-hidden h-100">
                <span class="round small" style="background: var(--color-primary);"></span>
                <span class="round big" style="background: var(--color-primary);"></span>
                <div class="card-body">
                    <div class="avtar avtar-lg mb-3" style="background-color: var(--color-primary-light);">
                        <i class="ti ti-users" style="color: var(--color-primary);"></i>
                    </div>
                    <span class="d-block f-34 f-w-500 my-2" style="color: var(--color-primary);">
                        1,247 <i class="ti ti-trending-up opacity-50"></i>
                    </span>
                    <p class="mb-0 text-muted">@(isAr ? "إجمالي الطلاب" : "Total Students")</p>
                    <small class="text-success"><i class="ti ti-arrow-up"></i> 12% @(isAr ? "هذا الشهر" : "this month")</small>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card custom-card overflow-hidden h-100">
                <span class="round small" style="background: var(--color-accent);"></span>
                <span class="round big" style="background: var(--color-accent);"></span>
                <div class="card-body">
                    <div class="avtar avtar-lg mb-3" style="background-color: var(--color-accent-light);">
                        <i class="ti ti-book" style="color: var(--color-accent);"></i>
                    </div>
                    <span class="d-block f-34 f-w-500 my-2" style="color: var(--color-accent);">
                        342 <i class="ti ti-book-2 opacity-50"></i>
                    </span>
                    <p class="mb-0 text-muted">@(isAr ? "الدروس النشطة" : "Active Lessons")</p>
                    <small class="text-success"><i class="ti ti-arrow-up"></i> 8 @(isAr ? "جديد هذا الأسبوع" : "new this week")</small>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card custom-card overflow-hidden h-100">
                <span class="round small" style="background: var(--color-secondary-dark);"></span>
                <span class="round big" style="background: var(--color-secondary-dark);"></span>
                <div class="card-body">
                    <div class="avtar avtar-lg mb-3" style="background-color: var(--color-secondary-light);">
                        <i class="ti ti-school" style="color: var(--color-secondary-dark);"></i>
                    </div>
                    <span class="d-block f-34 f-w-500 my-2" style="color: var(--color-secondary-dark);">
                        28 <i class="ti ti-books opacity-50"></i>
                    </span>
                    <p class="mb-0 text-muted">@(isAr ? "إجمالي المواد" : "Total Subjects")</p>
                    <small class="text-muted">@(isAr ? "عبر جميع المراحل" : "Across all grades")</small>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card custom-card overflow-hidden h-100">
                <span class="round small" style="background: var(--color-warning);"></span>
                <span class="round big" style="background: var(--color-warning);"></span>
                <div class="card-body">
                    <div class="avtar avtar-lg mb-3" style="background-color: var(--color-warning-light);">
                        <i class="ti ti-user-check" style="color: var(--color-warning-dark);"></i>
                    </div>
                    <span class="d-block f-34 f-w-500 my-2" style="color: var(--color-warning-dark);">
                        67 <i class="ti ti-chalkboard opacity-50"></i>
                    </span>
                    <p class="mb-0 text-muted">@(isAr ? "المدرسون النشطون" : "Active Instructors")</p>
                    <small class="text-success"><i class="ti ti-arrow-up"></i> 3 @(isAr ? "انضموا حديثاً" : "joined recently")</small>
                </div>
            </div>
        </div>

        <div class="col-12 mt-2 mb-4">
            <div class="card custom-card">
                <div class="card-header bg-white border-bottom-2">
                    <h5 class="mb-0" style="color: var(--color-primary);">
                        <i class="ti ti-bolt me-2"></i>@(isAr ? "إجراءات سريعة" : "Quick Actions")
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-xl-3 col-md-6">
                            <a href="/Admin/Student" class="btn btn-primary-custom w-100 py-3 text-decoration-none">
                                <i class="ti ti-users d-block mb-2 fs-2"></i>
                                <span class="d-block fw-bold">@(isAr ? "إدارة الطلاب" : "Manage Students")</span>
                                <small class="d-block mt-1 opacity-75">@(isAr ? "عرض وتعديل ملفات الطلاب" : "View and edit student profiles")</small>
                            </a>
                        </div>
                        <div class="col-xl-3 col-md-6">
                            <a href="/Admin/Course" class="btn w-100 py-3 text-white text-decoration-none" style="background-color: var(--color-accent);">
                                <i class="ti ti-book d-block mb-2 fs-2"></i>
                                <span class="d-block fw-bold">@(isAr ? "إدارة الدروس" : "Manage Lessons")</span>
                                <small class="d-block mt-1 opacity-75">@(isAr ? "إنشاء وتنظيم المحتوى" : "Create and organize content")</small>
                            </a>
                        </div>
                        <div class="col-xl-3 col-md-6">
                            <a href="#" class="btn w-100 py-3 text-white text-decoration-none" style="background-color: var(--color-secondary-dark);">
                                <i class="ti ti-school d-block mb-2 fs-2"></i>
                                <span class="d-block fw-bold">@(isAr ? "إدارة المواد" : "Manage Subjects")</span>
                                <small class="d-block mt-1 opacity-75">@(isAr ? "تنظيم أقسام المواد" : "Organize subject categories")</small>
                            </a>
                        </div>
                        <div class="col-xl-3 col-md-6">
                            <a href="/Admin/Instructor" class="btn w-100 py-3 text-white text-decoration-none" style="background-color: var(--color-warning-dark);">
                                <i class="ti ti-user-check d-block mb-2 fs-2"></i>
                                <span class="d-block fw-bold">@(isAr ? "إدارة المدرسين" : "Manage Instructors")</span>
                                <small class="d-block mt-1 opacity-75">@(isAr ? "إدارة طاقم التدريس" : "Manage teaching staff")</small>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-8 mb-4">
            <div class="card custom-card h-100">
                <div class="card-header bg-white border-bottom-2">
                    <h5 class="mb-0" style="color: var(--color-primary);">
                        <i class="ti ti-activity me-2"></i>@(isAr ? "نظرة عامة على نشاط المنصة" : "Platform Activity Overview")
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3 align-items-center">
                        <div class="col">
                            <small class="text-muted">@(isAr ? "نمو تسجيل الطلاب" : "Student Enrollment Growth")</small>
                            <h3 style="color: var(--color-primary);">+156 @(isAr ? "طالب" : "Students")</h3>
                        </div>
                        <div class="col-auto">
                            <select class="form-select border-primary">
                                <option>@(isAr ? "هذا الأسبوع" : "This Week")</option>
                                <option selected>@(isAr ? "هذا الشهر" : "This Month")</option>
                                <option>@(isAr ? "هذه السنة" : "This Year")</option>
                            </select>
                        </div>
                    </div>
                    <div class="alert mb-4" style="background-color: var(--color-primary-light); border-left: 4px solid var(--color-primary); color: var(--color-text-primary);">
                        <div class="d-flex align-items-center">
                            <i class="ti ti-chart-line me-3 fs-2 text-primary"></i>
                            <div>
                                <h6 class="mb-1 text-primary fw-bold">@(isAr ? "تقدم رائع!" : "Great Progress!")</h6>
                                <p class="mb-0 small">@(isAr ? "شهدت منصتك زيادة بنسبة 23% في الطلاب النشطين هذا الشهر. استمر في العمل الرائع!" : "Your platform has seen a 23% increase in active students this month. Keep up the excellent work!")</p>
                            </div>
                        </div>
                    </div>
                    <div id="enrollment-chart" class="bg-light rounded-3 d-flex flex-column align-items-center justify-content-center p-5">
                        <i class="ti ti-chart-bar fs-1 opacity-25"></i>
                        <p class="mt-2 text-muted">@(isAr ? "سيظهر الرسم البياني للتسجيل هنا" : "Enrollment chart visualization will appear here")</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-4 mb-4">
            <div class="card custom-card h-100">
                <div class="card-header bg-white border-bottom-2">
                    <h5 class="mb-0" style="color: var(--color-primary);">
                        <i class="ti ti-trending-up me-2"></i>@(isAr ? "أعلى المواد أداءً" : "Top Performing Subjects")
                    </h5>
                </div>
                <div class="card-body">
                    <div class="rounded p-3 mb-3" style="background-color: var(--color-primary-light);">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-0 text-primary fw-bold"><i class="ti ti-math me-1"></i>@(isAr ? "الرياضيات" : "Mathematics")</h6>
                                <small class="text-muted">456 @(isAr ? "طالب مسجل" : "enrolled students")</small>
                            </div>
                            <span class="badge bg-success">95%</span>
                        </div>
                    </div>
                    <ul class="list-group list-group-flush">
                        @{
                            var subjects = new[] {
                                                new { Icon = "ti-flask", Color = "var(--color-accent)", TitleAr = "العلوم", TitleEn = "Science", Count = 423, Rate = "92%" },
                                                new { Icon = "ti-language", Color = "var(--color-secondary-dark)", TitleAr = "الإنجليزية", TitleEn = "English", Count = 398, Rate = "89%" },
                                                new { Icon = "ti-world", Color = "var(--color-accent)", TitleAr = "التاريخ", TitleEn = "History", Count = 312, Rate = "85%" },
                                                new { Icon = "ti-device-desktop", Color = "var(--color-primary)", TitleAr = "علوم الحاسب", TitleEn = "Computer Science", Count = 287, Rate = "88%" }
                                                };
                        }
                        @foreach (var sub in subjects)
                        {
                            <li class="list-group-item px-0 border-0">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-0"><i class="@sub.Icon me-1" style="color: @sub.Color;"></i>@(isAr? sub.TitleAr: sub.TitleEn)</h6>
                                        <small class="text-success">@sub.Count @(isAr ? "طالب" : "students")</small>
                                    </div>
                                    <span class="badge bg-success">@sub.Rate <i class="ti ti-arrow-up ms-1"></i></span>
                                </div>
                            </li>
                        }
                    </ul>
                    <div class="text-center mt-4">
                        <a href="#" class="text-primary fw-bold text-decoration-none">
                            @(isAr ? "عرض جميع المواد" : "View all subjects")
                            <i class="ti ti-chevron-right ms-1"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 mt-2">
            <div class="card shadow-sm border-0" style="border-@(isAr ? "right" : "left"): 4px solid var(--color-accent) !important; background: linear-gradient(to @(isAr ? "left" : "right"), var(--color-accent-light) 0%, var(--color-bg-white) 100%);">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-auto">
                            <div class="avtar avtar-lg" style="background-color: var(--color-accent);">
                                <i class="ti ti-bulb text-white fs-4"></i>
                            </div>
                        </div>
                        <div class="col">
                            <h5 class="mb-1 fw-bold" style="color: var(--color-accent);">@(isAr ? "نصيحة المنصة" : "Platform Tip")</h5>
                            <p class="mb-0 text-muted">
                                @(isAr ? "شجع المدرسين على تقديم ملاحظات دورية للطلاب. الدراسات تظهر أن التغذية الراجعة في الوقت المناسب تحسن نتائج التعلم بنسبة تصل إلى 40%!" : "Encourage instructors to provide regular feedback to students. Studies show that timely feedback improves learning outcomes by up to 40%!")
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>